\section{Methodology}
\label{sec-method}


\subsection{Proactive Traffic Prediction}
\label{subsec-proactive}

{\em Propagation vs. historical speed based methods}
Propagation can better fit to anomalous scenarios such as traffic accidents, administrative controls and extreme weather where is traffic condition is largely different from the one in regular situation.

{\em Residual speed propagation.} 

Given the speed of road segments (represented by a speed vector $v$) at the current time, predict the speed in the near future: $v'=Mv+b$.

Key: local propagation, \ie sparsity / time dependent / fully data-driven (i. number of time slots and ii. probability by frequency and beyond)


\stitle{Enforcing local propagation}.
{\em motivation of local propagation.}
We present two methods to enforce local propagation such that the speed only propagates to road segments nearby.

\etitle{Trajectory}.
The first method learns the local propagation from trajectories. The intuition behind is that {\em }. {\bf [add data statistics to verify]}

More specifically, given a trajectory $Tr$ generated by a taxicab, the corresponding sequence of road segments is first revealed through map matching methods~\cite{Newson2009MM}. Nearby road segments are then captured by a sliding window. Considering that the length of road segments varies significantly, we further let the length of the sliding window, \ie the number of road segments in the windows, be adaptive to the road segment length.

\begin{example}
learn matrix M from trajectories.
\end{example}

\etitle{Topology}.
The second method learns the local propagation from the topology of the underlying road network, under the assumption that drivers always drive along the shortest paths from their origins to their destinations. This assumption is widely used in tasks of urban computing, \eg map matching.

{\bf Method.} \\
1. Randomly sample a starting point; \\
2. Shortest paths to other nodes with Dijkstra; \\
3. Parse the shortest path tree through Depth-First Search; \\
4. generate local propagation road segment pairs and count their occurrence, the window size is determined such that the total length is less than a pre-defined radius (1km); \\
5. Repeat 1--4 for $K$ times; \\
6. select pairs with the most occurrence times;

{\em Selection of radius $R$.} A reasonable selection of radius, \eg 1km or 2 km, suffices for our model. If the real propagation area is larger than $R$, the road segments with $R$ is still enough. If the real propagation area is less than $R$, let the weights learned later be close to zero.

\stitle{Learning propagation weights}.



\subsection{Collective Route Planning}
\label{subsec-route}

